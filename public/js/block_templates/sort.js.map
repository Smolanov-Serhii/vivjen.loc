{"version":3,"file":"/js/block_templates/sort.js","mappings":"MAAA,IAAMA,EAAQC,SAASC,eAAe,YAChCC,EAAUH,EAAMI,iBAAiB,MACjCC,EAAYL,EAAMM,cAAc,SAChCC,EAAOF,EAAUD,iBAAiB,MAGlCI,EAAaC,MAAMC,KAAKP,GAASQ,KAAI,SAASC,GAChD,MAAO,MAILC,EAAY,SAASC,EAAOC,GAG9B,MACS,WAFIZ,EAAQW,GAAOE,aAAa,aAG1BC,WAAWF,GAGXA,GAyCnB,GAAGG,QAAQC,KAAKhB,GAAS,SAASS,EAAQE,GACtCF,EAAOQ,iBAAiB,SAAS,YAtClB,SAASN,GAExB,IAAMO,EAAYb,EAAWM,IAAU,MAGjCQ,EAA4B,QAAdD,EAAuB,GAAK,EAE1CE,EAAUd,MAAMC,KAAKH,GAE3BgB,EAAQC,MAAK,SAASC,EAAMC,GACxB,IAAMC,EAAQF,EAAKrB,iBAAiB,MAAMU,GAAOc,UAC3CC,EAAQH,EAAKtB,iBAAiB,MAAMU,GAAOc,UAE3CE,EAAIjB,EAAUC,EAAOa,GACrBI,EAAIlB,EAAUC,EAAOe,GAE3B,QAAQ,GACJ,KAAKC,EAAIC,EAAG,OAAO,EAAIT,EACvB,KAAKQ,EAAIC,EAAG,OAAQ,EAAIT,EACxB,KAAKQ,IAAMC,EAAG,OAAO,MAK7B,GAAGb,QAAQC,KAAKZ,GAAM,SAASyB,GAC3B3B,EAAU4B,YAAYD,MAI1BxB,EAAWM,GAAuB,QAAdO,EAAsB,OAAS,MAGnDE,EAAQL,SAAQ,SAASgB,GACrB7B,EAAU8B,YAAYD,MAMtBE,CAAWtB,GACXuB,KAAKC,UAAUC,OAAO,kB","sources":["webpack:///./resources/js/block_templates/sort.js"],"sourcesContent":["const table = document.getElementById('sortable');\nconst headers = table.querySelectorAll('th');\nconst tableBody = table.querySelector('tbody');\nconst rows = tableBody.querySelectorAll('tr');\n\n// Направление сортировки\nconst directions = Array.from(headers).map(function(header) {\n    return '';\n});\n\n// Преобразовать содержимое данной ячейки в заданном столбце\nconst transform = function(index, content) {\n    // Получить тип данных столбца\n    const type = headers[index].getAttribute('data-type');\n    switch (type) {\n        case 'number':\n            return parseFloat(content);\n        case 'string':\n        default:\n            return content;\n    }\n};\n\nconst sortColumn = function(index) {\n    // Получить текущее направление\n    const direction = directions[index] || 'asc';\n\n    // Фактор по направлению\n    const multiplier = (direction === 'asc') ? 1 : -1;\n\n    const newRows = Array.from(rows);\n\n    newRows.sort(function(rowA, rowB) {\n        const cellA = rowA.querySelectorAll('td')[index].innerHTML;\n        const cellB = rowB.querySelectorAll('td')[index].innerHTML;\n\n        const a = transform(index, cellA);\n        const b = transform(index, cellB);\n\n        switch (true) {\n            case a > b: return 1 * multiplier;\n            case a < b: return -1 * multiplier;\n            case a === b: return 0;\n        }\n    });\n\n    // Удалить старые строки\n    [].forEach.call(rows, function(row) {\n        tableBody.removeChild(row);\n    });\n\n    // Поменять направление\n    directions[index] = direction === 'asc' ? 'desc' : 'asc';\n\n    // Добавить новую строку\n    newRows.forEach(function(newRow) {\n        tableBody.appendChild(newRow);\n    });\n};\n\n[].forEach.call(headers, function(header, index) {\n    header.addEventListener('click', function() {\n        sortColumn(index);\n        this.classList.toggle(\"clicked\");\n    });\n});"],"names":["table","document","getElementById","headers","querySelectorAll","tableBody","querySelector","rows","directions","Array","from","map","header","transform","index","content","getAttribute","parseFloat","forEach","call","addEventListener","direction","multiplier","newRows","sort","rowA","rowB","cellA","innerHTML","cellB","a","b","row","removeChild","newRow","appendChild","sortColumn","this","classList","toggle"],"sourceRoot":""}