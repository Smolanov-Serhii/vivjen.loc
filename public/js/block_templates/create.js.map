{"version":3,"file":"/js/block_templates/create.js","mappings":"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","sources":["webpack:///./resources/js/block_templates/create.js","webpack:///./resources/js/app.js","webpack:///webpack/bootstrap"],"sourcesContent":["const {token, summernote_config, JSONEditor_options} = require('../app.js');\nconst container = document.getElementById('jsoneditor');\nvar editor;\n\n\n$('.editor').each(function (element) {\n\n    var id = this.id;\n    $(`#${id}`).summernote(summernote_config);\n    $(`#${id}`)[0].value = $(`#${id}`).summernote('code');\n    $(`#${id}`).on(\"summernote.change\", function (e) {   // callback as jquery custom event\n        $(`#${id}`)[0].value = $(`#${id}`).summernote('code');\n    });\n})\n\n$(document).on('change', '.select-type', function () {\n    $('.overlay').show();\n\n    var u_id = this.dataset.u_id;\n\n    var type_selector = this;\n\n    if (this.value != '-1') {\n\n        $.ajax({\n            url: `/admin/block_templates/attributes/template/${this.value}/${u_id}`,\n            method: 'GET',\n            // dataType:'JSON',\n            // contentType: false,\n            // cache: false,\n            // processData: false,\n            success: function (data) {\n                if (data.errors) {\n\n                    //     alert.show()\n                    //     $.each(data.errors, function (key,value) {\n                    //         alert.append(`<p>${value}</p>`);\n                    //     })\n                } else if (data.status) {\n\n                    $(`#attribute_fields_${u_id}`)[0].style='';\n                    $(`#attribute_fields_${u_id}`).append(data.html);\n\n                    switch (type_selector.value * 1) {\n                        case 0:\n                            // $(`#${last[0].id} label`)[0].htmlFor = input_id;\n                            break;\n                        case 1:\n                            break;\n                        case 2:\n                            break;\n                        case 3:\n\n\n                            var id = data.u_id;\n                            $(`#${id}`).summernote(summernote_config);\n                            $(`#${id}`)[0].value = $(`#${id}`).summernote('code');\n                            $(`#${id}`).on(\"summernote.change\", function (e) {   // callback as jquery custom event\n                                $(`#${id}`)[0].value = $(`#${id}`).summernote('code');\n                            });\n                            break;\n                        case 4:\n                            break;\n                    }\n                }\n                $(type_selector).selectedIndex = -1;\n                $(type_selector).val('-1').change();\n\n                $('.overlay').hide();\n            }\n        })\n    }\n});\n\n$(document).on('click', '.remove-input', function (e) {\n    $(`.card-footer`).after(\n        `<input type=\"hidden\" name=\"delete_attribute[]\" value=\"${this.dataset.id}\">`\n    );\n    $(this)\n        .parent('.input-group-append')\n        .parent('.input-group')\n        .remove();\n\n    $(`#option_${this.dataset.u_id}`).remove();\n})\n\n$(document).on('click', '.remove-input-repeator', function (e) {\n    $(`.card-footer`).after(\n        `<input type=\"hidden\" name=\"delete_repeater[]\" value=\"${this.dataset.id}\">`\n    );\n    $(`#option_repeator_${this.dataset.id}`).remove();\n})\n\n\n// preload image\n$(document).on('change','.image-input', function (e){\n    var id = this.dataset.id;\n    var fr = new FileReader();\n    fr.readAsDataURL(this.files[0]);\n    fr.onload = function(e) {\n        var img = document.getElementById(`image_${id}`)\n        img.style = '';\n        img.src = this.result\n    }\n});\n\n$(document).on('click', '.edit-setting', function (){\n    var settings;\n\n    if($(`#selector_${this.dataset.u_id}`)[0].value) {\n        settings = JSON.parse($(`#selector_${this.dataset.u_id}`)[0].value);\n    } else {\n        settings = window[`${this.dataset.input_type}_${this.dataset.u_id}`];\n    }\n\n    editor = new JSONEditor(container, JSONEditor_options);\n    editor.set(settings);\n    $('#save_settings')[0].dataset.u_id = this.dataset.u_id;\n})\n\n$(document).on('click', '.save-setting',  function () {\n    console.log(editor.get());\n    $(`#selector_${this.dataset.u_id}`)[0].value = JSON.stringify(editor.get());\n    $('#editorFormModal').modal('toggle');\n});\n\n\n\n$('#editorFormModal').on('hidden.bs.modal', function (e) {\n    editor.destroy();\n})\n","const token = $('meta[name=\"csrf-token\"]').attr('content');\nconst upload_link = '/admin/upload/image';\n\nfunction uploadImage(image, editor) {\n\n    var data = new FormData();\n\n    data.append(\"image\", image);\n    data.append('_token', token);\n\n    $.ajax({\n        url: upload_link,\n        cache: false,\n        contentType: false,\n        processData: false,\n        data: data,\n        type: \"post\",\n        success: function(data) {\n\n            let image = `<picture>\n                <source srcSet=\"/uploads/${data.urls['webp']}\" type=\"image/webp\">\n                <img src=\"/uploads/${data.urls['original']}\" alt=\"описание\"/>\n            </picture>`;\n\n            $(editor).summernote(\"pasteHTML\", image);\n        },\n        error: function(data) {\n            console.log('error', data);\n        }\n    });\n}\n\nconst summernote_config = {\n    toolbar: [\n        ['style', ['style']],\n        ['font', ['bold', 'underline', 'clear']],\n        ['fontname', ['fontname']],\n        ['fontsize', ['fontsize']],\n        ['color', ['color']],\n        ['para', ['ul', 'ol', 'paragraph']],\n        ['table', ['table']],\n        ['insert', ['link', 'picture', 'video']],\n        ['view', ['fullscreen', 'codeview', 'help']],\n    ],\n    popover: false,\n    callbacks: {\n        onImageUpload: function(files) {\n            uploadImage(files[0], this);\n        }\n    },\n};\n\nconst JSONEditor_options = {\n    mode: 'tree'\n};\n\nmodule.exports = {\n    module: {\n        rules: [\n            {\n                // You can use `regexp`\n                // test: /vendor\\.js/$\n                test: /\\.css$/,\n                loader: 'exports-loader',\n                use: ['style-loader', 'css-loader']\n                // options: {\n                //     exports: 'myFunction',\n                // },\n            },\n        ],\n    },\n    token: token,\n    summernote_config: summernote_config,\n    JSONEditor_options: JSONEditor_options,\n};\n\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n"],"names":["editor","summernote_config","JSONEditor_options","container","token","$","attr","toolbar","popover","callbacks","onImageUpload","files","image","data","this","FormData","append","ajax","url","cache","contentType","processData","type","success","urls","summernote","error","console","log","module","exports","rules","test","loader","use","mode","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","__webpack_modules__","require","document","getElementById","each","element","id","value","on","e","show","u_id","dataset","type_selector","method","errors","status","style","html","selectedIndex","val","change","hide","after","parent","remove","fr","FileReader","readAsDataURL","onload","img","src","result","settings","JSON","parse","window","input_type","JSONEditor","set","get","stringify","modal","destroy"],"sourceRoot":""}