<?php
/**
 * @var $templates \Illuminate\Database\Eloquent\Collection;
 */
?>
@extends('adminlte::page')
@section('title', __('block_templates.list'))
@section('content_header')
    @include('breadcrumbs', $breadcrumbs = [
        [
            'label' => 'Панель управления',
            'url' => route('admin.block_templates.list')
        ],
        [
            'label' => __('block_templates.list'),
        ]
    ])
@endsection

@section('content')
    @include('admin.block_templates.includes.template_modal_dialog_load')
    <div class="card">
        <div class="card-header border-transparent">
            <h3 class="card-title"> @lang('pages.list') </h3>

            <div class="card-tools">
                <button type="button" class="btn btn-tool" data-card-widget="collapse">
                    <i class="fas fa-minus"></i>
                </button>
                <button type="button" class="btn btn-tool" data-card-widget="remove">
                    <i class="fas fa-times"></i>
                </button>
            </div>
        </div>
        <div class="template-wrapper">
            <div class="card-footer clearfix">
                <a href="{{ route('admin.block_templates.create') }}" class="btn btn-sm btn-info float-left"> @lang('block_templates.create') </a>
            </div>
            <div class="card-footer clearfix">
                <button
                        type="button"
                        class="btn btn-sm btn-info float-left"
                        data-toggle="modal"
                        data-target="#templateModalLoad"
                        id="createAttr"
                > @lang('block_templates.load')
                </button>
            </div>
        </div>
        <!-- /.card-header -->
        <div class="card-body p-0">
            <div class="table-responsive">
                <table class="table m-0" id="sortable">
                    <thead>
                    <tr>
                        <th style="cursor: pointer;">@lang('system.preview')
                            <svg style="margin-left: 0.5rem;" width="15" height="15" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M3.81695 0C3.97251 0.0553493 4.02622 0.168668 4.0259 0.329476C4.02295 1.60928 4.02235 2.88913 4.0241 4.16905C4.0241 6.67417 4.0241 9.17925 4.0241 11.6843V11.7878H4.12464C4.61034 11.7878 5.09604 11.7896 5.58206 11.7878C5.70897 11.7878 5.81738 11.8151 5.87207 11.9412C5.9289 12.0722 5.8783 12.1806 5.78496 12.2743C5.50013 12.5602 5.21487 12.8457 4.92917 13.1309C4.34413 13.7155 3.75914 14.3 3.17421 14.8844C3.01995 15.0385 2.85947 15.037 2.70374 14.8803C1.8402 14.0111 0.97672 13.1421 0.113293 12.2733C0.0346904 12.1942 -0.0218052 12.1074 0.00816204 11.9893C0.0433694 11.8498 0.133435 11.7871 0.294406 11.7869H1.8789V11.687C1.8789 9.78749 1.87852 7.88825 1.87776 5.98935C1.87776 4.09295 1.87743 2.19645 1.87677 0.299836C1.87677 0.148526 1.94228 0.0525655 2.08114 0.00114634L3.81695 0Z" fill="black"/>
                                <path d="M14.723 14.8035C14.659 14.9597 14.5375 15.001 14.3765 15C12.2425 14.9973 10.1085 14.9968 7.97453 14.9985C7.82174 14.9985 7.66896 14.9985 7.51601 14.9985C7.33392 14.9985 7.22584 14.8909 7.22551 14.7082C7.22486 14.1842 7.22486 13.6601 7.22551 13.1361C7.22551 12.956 7.3331 12.8517 7.51143 12.8517C9.81721 12.8517 12.1231 12.8512 14.4291 12.8504C14.5773 12.8504 14.6706 12.9159 14.7227 13.0505L14.723 14.8035Z" fill="black"/>
                                <path d="M9.71213 0C9.86164 0.0574781 9.91585 0.167685 9.91437 0.325382C9.90979 0.835316 9.91437 1.34525 9.91273 1.85518C9.91273 2.04776 9.81186 2.14667 9.61798 2.14683C8.92529 2.14683 8.23261 2.14683 7.53992 2.14683C7.32082 2.14683 7.22486 2.0494 7.22486 1.83226C7.22486 1.32789 7.22731 0.823361 7.22404 0.318832C7.22306 0.159989 7.28299 0.0515829 7.43594 0.00016379L9.71213 0Z" fill="black"/>
                                <path d="M10.1757 8.56375C11.0491 8.56375 11.9221 8.56375 12.7948 8.56375C13.0319 8.56375 13.1199 8.65136 13.12 8.88929C13.12 9.39147 13.12 9.89366 13.12 10.3958C13.12 10.6169 13.0269 10.7107 12.8073 10.7109C11.0585 10.7109 9.30973 10.7109 7.56105 10.7109C7.31427 10.7109 7.22469 10.6207 7.22469 10.3759C7.22469 9.87117 7.22469 9.36642 7.22469 8.86162C7.22469 8.69786 7.30657 8.58962 7.44183 8.5685C7.4825 8.56406 7.52345 8.56275 7.56432 8.56456L10.1757 8.56375Z" fill="black"/>
                                <path d="M9.37677 6.43607H7.53517C7.32311 6.43607 7.22568 6.33782 7.22551 6.12494C7.22551 5.61184 7.22551 5.09874 7.22551 4.58564C7.22551 4.3947 7.32819 4.28957 7.5165 4.28957C8.75013 4.28957 9.98331 4.28957 11.2161 4.28957C11.4172 4.28957 11.5151 4.38422 11.5156 4.58433C11.5172 5.1054 11.5172 5.62647 11.5156 6.14754C11.5156 6.33586 11.4142 6.43542 11.2265 6.43558C10.6098 6.43646 9.99325 6.43662 9.37677 6.43607Z" fill="black"/>
                            </svg>
                        </th>
                        <th style="cursor: pointer;"> @lang('block_templates.name')
                            <svg style="margin-left: 0.5rem;" width="15" height="15" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M3.81695 0C3.97251 0.0553493 4.02622 0.168668 4.0259 0.329476C4.02295 1.60928 4.02235 2.88913 4.0241 4.16905C4.0241 6.67417 4.0241 9.17925 4.0241 11.6843V11.7878H4.12464C4.61034 11.7878 5.09604 11.7896 5.58206 11.7878C5.70897 11.7878 5.81738 11.8151 5.87207 11.9412C5.9289 12.0722 5.8783 12.1806 5.78496 12.2743C5.50013 12.5602 5.21487 12.8457 4.92917 13.1309C4.34413 13.7155 3.75914 14.3 3.17421 14.8844C3.01995 15.0385 2.85947 15.037 2.70374 14.8803C1.8402 14.0111 0.97672 13.1421 0.113293 12.2733C0.0346904 12.1942 -0.0218052 12.1074 0.00816204 11.9893C0.0433694 11.8498 0.133435 11.7871 0.294406 11.7869H1.8789V11.687C1.8789 9.78749 1.87852 7.88825 1.87776 5.98935C1.87776 4.09295 1.87743 2.19645 1.87677 0.299836C1.87677 0.148526 1.94228 0.0525655 2.08114 0.00114634L3.81695 0Z" fill="black"/>
                                <path d="M14.723 14.8035C14.659 14.9597 14.5375 15.001 14.3765 15C12.2425 14.9973 10.1085 14.9968 7.97453 14.9985C7.82174 14.9985 7.66896 14.9985 7.51601 14.9985C7.33392 14.9985 7.22584 14.8909 7.22551 14.7082C7.22486 14.1842 7.22486 13.6601 7.22551 13.1361C7.22551 12.956 7.3331 12.8517 7.51143 12.8517C9.81721 12.8517 12.1231 12.8512 14.4291 12.8504C14.5773 12.8504 14.6706 12.9159 14.7227 13.0505L14.723 14.8035Z" fill="black"/>
                                <path d="M9.71213 0C9.86164 0.0574781 9.91585 0.167685 9.91437 0.325382C9.90979 0.835316 9.91437 1.34525 9.91273 1.85518C9.91273 2.04776 9.81186 2.14667 9.61798 2.14683C8.92529 2.14683 8.23261 2.14683 7.53992 2.14683C7.32082 2.14683 7.22486 2.0494 7.22486 1.83226C7.22486 1.32789 7.22731 0.823361 7.22404 0.318832C7.22306 0.159989 7.28299 0.0515829 7.43594 0.00016379L9.71213 0Z" fill="black"/>
                                <path d="M10.1757 8.56375C11.0491 8.56375 11.9221 8.56375 12.7948 8.56375C13.0319 8.56375 13.1199 8.65136 13.12 8.88929C13.12 9.39147 13.12 9.89366 13.12 10.3958C13.12 10.6169 13.0269 10.7107 12.8073 10.7109C11.0585 10.7109 9.30973 10.7109 7.56105 10.7109C7.31427 10.7109 7.22469 10.6207 7.22469 10.3759C7.22469 9.87117 7.22469 9.36642 7.22469 8.86162C7.22469 8.69786 7.30657 8.58962 7.44183 8.5685C7.4825 8.56406 7.52345 8.56275 7.56432 8.56456L10.1757 8.56375Z" fill="black"/>
                                <path d="M9.37677 6.43607H7.53517C7.32311 6.43607 7.22568 6.33782 7.22551 6.12494C7.22551 5.61184 7.22551 5.09874 7.22551 4.58564C7.22551 4.3947 7.32819 4.28957 7.5165 4.28957C8.75013 4.28957 9.98331 4.28957 11.2161 4.28957C11.4172 4.28957 11.5151 4.38422 11.5156 4.58433C11.5172 5.1054 11.5172 5.62647 11.5156 6.14754C11.5156 6.33586 11.4142 6.43542 11.2265 6.43558C10.6098 6.43646 9.99325 6.43662 9.37677 6.43607Z" fill="black"/>
                            </svg>
                        </th>
{{--                        <th> @lang('block_templates.path') </th>--}}
                        <th style="cursor: pointer;"> @lang('system.parrent')
                            <svg style="margin-left: 0.5rem;" width="15" height="15" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M3.81695 0C3.97251 0.0553493 4.02622 0.168668 4.0259 0.329476C4.02295 1.60928 4.02235 2.88913 4.0241 4.16905C4.0241 6.67417 4.0241 9.17925 4.0241 11.6843V11.7878H4.12464C4.61034 11.7878 5.09604 11.7896 5.58206 11.7878C5.70897 11.7878 5.81738 11.8151 5.87207 11.9412C5.9289 12.0722 5.8783 12.1806 5.78496 12.2743C5.50013 12.5602 5.21487 12.8457 4.92917 13.1309C4.34413 13.7155 3.75914 14.3 3.17421 14.8844C3.01995 15.0385 2.85947 15.037 2.70374 14.8803C1.8402 14.0111 0.97672 13.1421 0.113293 12.2733C0.0346904 12.1942 -0.0218052 12.1074 0.00816204 11.9893C0.0433694 11.8498 0.133435 11.7871 0.294406 11.7869H1.8789V11.687C1.8789 9.78749 1.87852 7.88825 1.87776 5.98935C1.87776 4.09295 1.87743 2.19645 1.87677 0.299836C1.87677 0.148526 1.94228 0.0525655 2.08114 0.00114634L3.81695 0Z" fill="black"/>
                                <path d="M14.723 14.8035C14.659 14.9597 14.5375 15.001 14.3765 15C12.2425 14.9973 10.1085 14.9968 7.97453 14.9985C7.82174 14.9985 7.66896 14.9985 7.51601 14.9985C7.33392 14.9985 7.22584 14.8909 7.22551 14.7082C7.22486 14.1842 7.22486 13.6601 7.22551 13.1361C7.22551 12.956 7.3331 12.8517 7.51143 12.8517C9.81721 12.8517 12.1231 12.8512 14.4291 12.8504C14.5773 12.8504 14.6706 12.9159 14.7227 13.0505L14.723 14.8035Z" fill="black"/>
                                <path d="M9.71213 0C9.86164 0.0574781 9.91585 0.167685 9.91437 0.325382C9.90979 0.835316 9.91437 1.34525 9.91273 1.85518C9.91273 2.04776 9.81186 2.14667 9.61798 2.14683C8.92529 2.14683 8.23261 2.14683 7.53992 2.14683C7.32082 2.14683 7.22486 2.0494 7.22486 1.83226C7.22486 1.32789 7.22731 0.823361 7.22404 0.318832C7.22306 0.159989 7.28299 0.0515829 7.43594 0.00016379L9.71213 0Z" fill="black"/>
                                <path d="M10.1757 8.56375C11.0491 8.56375 11.9221 8.56375 12.7948 8.56375C13.0319 8.56375 13.1199 8.65136 13.12 8.88929C13.12 9.39147 13.12 9.89366 13.12 10.3958C13.12 10.6169 13.0269 10.7107 12.8073 10.7109C11.0585 10.7109 9.30973 10.7109 7.56105 10.7109C7.31427 10.7109 7.22469 10.6207 7.22469 10.3759C7.22469 9.87117 7.22469 9.36642 7.22469 8.86162C7.22469 8.69786 7.30657 8.58962 7.44183 8.5685C7.4825 8.56406 7.52345 8.56275 7.56432 8.56456L10.1757 8.56375Z" fill="black"/>
                                <path d="M9.37677 6.43607H7.53517C7.32311 6.43607 7.22568 6.33782 7.22551 6.12494C7.22551 5.61184 7.22551 5.09874 7.22551 4.58564C7.22551 4.3947 7.32819 4.28957 7.5165 4.28957C8.75013 4.28957 9.98331 4.28957 11.2161 4.28957C11.4172 4.28957 11.5151 4.38422 11.5156 4.58433C11.5172 5.1054 11.5172 5.62647 11.5156 6.14754C11.5156 6.33586 11.4142 6.43542 11.2265 6.43558C10.6098 6.43646 9.99325 6.43662 9.37677 6.43607Z" fill="black"/>
                            </svg>
                        </th>
                        <th></th>
                    </tr>
                    </thead>
                    <tbody>
                    @foreach($templates as $template)
                        <tr>
                            <td>
                                <img src="{{ '/uploads/block_templates/thumbs/' . $template->image_path }}" alt="">
                            </td>
                            <td>{{ $template->name }}<br>
                                <b>{{ $template->path }}</b>
                            </td>

                            <td>
{{--                                @if($template->enabled)--}}
{{--                                    <span class="badge badge-success">Enabled</span>--}}
{{--                                @else--}}
{{--                                    <span class="badge badge-danger">Disable</span>--}}
{{--                                @endif--}}
                                @foreach ($template->groups as $group)
                                    <div>{{ $group->key }}</div>
                                @endforeach

                            </td>
                            <td>
                                <a
                                    href="{{ route('admin.block_templates.edit', ['block_template' => $template]) }}"
                                    class="btn btn-success"
                                >
                                    <i class="fas fa-pen"></i>
{{--                                    @lang('system.update') --}}
                                </a>
{{--                                <a href="{{ route('admin.block_templates.delete', ['block_template' => $template]) }}" class="btn btn-danger"> @lang('system.delete') </a>--}}
                                <a
                                    href="{{ route('admin.block_templates.delete', ['block_template' => $template]) }}"
                                    class="btn btn-danger btn-icon"
                                    onclick="return confirm('Are you sure?')"
                                >
                                    <i class="fa fa-trash" aria-hidden="true"></i>
                                </a>
                            </td>
                        </tr>
                    @endforeach
                    </tbody>
                </table>
            </div>
            <!-- /.table-responsive -->
        </div>
        <!-- /.card-body -->
        <div class="template-wrapper">
            <div class="card-footer clearfix">
                <a href="{{ route('admin.block_templates.create') }}" class="btn btn-sm btn-info float-left"> @lang('block_templates.create') </a>
            </div>
            <div class="card-footer clearfix">
                <button
                        type="button"
                        class="btn btn-sm btn-info float-left"
                        data-toggle="modal"
                        data-target="#templateModalLoad"
                        id="createAttr"
                > @lang('block_templates.load')
                </button>
            </div>
        </div>
        <!-- /.card-footer -->
    </div>
@endsection

@section('adminlte_js')
    <script src="{{ asset('/js/jquery-ui.js') }}"></script>
    <script src="{{ asset('/js/load.js') }}"></script>
    <script src="{{ asset('/js/block_templates/sort.js') }}"></script>
@endsection
@section('adminlte_css')
    <link href="{{ asset('/css/admin.css') }}" rel="stylesheet">
@endsection